{% extends extends_base|default:'baseFw.html' %}
{% load static %}
{% load aufgaben_filter %}
{% load i18n %}

{% block head %}
    <link rel="stylesheet" href="{% static 'css/aufgaben.css' %}">
{% endblock %}

{% block headline %}
    {% trans "Aufgaben" %}
{% endblock %}

{% block content %}
    {% if show_confetti %}
        {% include 'confetti.html' %}
    {% endif %}

    <div class="card rounded-4 mb-2">
        <div class="card-header rounded-4">
            <h3 class="card-title mb-0">{% trans "Aufgaben" %}</h3>
        </div>
        <div class="card-body">
            {# Progress Bar #}
            {% include "components/progress_bar.html" with offen_prozent=offen_prozent pending_prozent=pending_prozent erledigt_prozent=erledigt_prozent len_offen=len_offen len_pending=len_pending len_erledigt=len_erledigt show_count=True %}
        </div>
    </div>

    {# Task Sections #}
    {% if aufgaben_offen %}
        {% include "components/task_section.html" with title=_("Offene Aufgaben") count=len_offen tasks=aufgaben_offen info_text=_("Offene Aufgaben sind Aufgaben, die noch nicht abgeschlossen sind.") %}
    {% endif %}

    {% if aufgaben_pending %}
        {% include "components/task_section.html" with title=_("Pending Aufgaben") count=len_pending tasks=aufgaben_pending info_text=_("Pending Aufgaben sind abgeschlossene Aufgaben, die zur Überprüfung eingereicht wurden und auf Bestätigung warten.") %}
    {% endif %}

    {% if aufgaben_erledigt %}
        {% include "components/task_section.html" with title=_("Erledigte Aufgaben") count=len_erledigt tasks=aufgaben_erledigt info_text=_("Erledigte Aufgaben sind Aufgaben, die abgeschlossen wurden.") %}
    {% endif %}
{% endblock %}
