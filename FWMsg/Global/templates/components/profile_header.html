{% load i18n %}
{% load static %}
<div class="d-flex align-items-center gap-2 justify-content-between">
  <div class="d-flex align-items-center gap-2">
    <h3 class="card-title mb-0">
      {% if user.first_name %}
        {{ user.first_name }} {{ user.last_name }}
      {% else %}
        {{ user.username }}
      {% endif %}
    </h3>
    
    {# Online Status Indicator #}
    <div class="d-flex align-items-center gap-2">
      {% if user.customuser.is_currently_online %}
        <span class="badge bg-success rounded-pill d-flex align-items-center gap-1 online-status-badge" title="{% trans 'Aktuell online' %}">
          <i class="bi bi-circle-fill" style="font-size: 0.6rem;"></i>
          {% trans 'Online' %}
        </span>
      {% else %}
        <span class="badge bg-secondary rounded-pill d-flex align-items-center gap-1 online-status-badge" title="{% trans 'Zuletzt online' %}: {{ user.customuser.get_online_status_display }}">
          <i class="bi bi-circle" style="font-size: 0.6rem;"></i>
          {{ user.customuser.get_online_status_display }}
        </span>
      {% endif %}
    </div>
    {% if this_user %}
      {% if ampel_of_user %}
        <a href="{% url 'ampel' %}" class="text-decoration-none">
          <div class="d-flex align-items-center gap-1">
            <small class="text-muted d-flex align-items-center gap-1">{% trans 'Ampel' %}</small>
            <span class="badge rounded-circle {% if ampel_of_user.status == 'G' %}
                bg-success
              {% elif ampel_of_user.status == 'Y' %}
                bg-warning
              {% elif ampel_of_user.status == 'R' %}
                bg-danger
              {% endif %}"
              style="width: 15px; height: 15px; display: inline-block;">

            </span>
          </div>
        </a>
      {% endif %}
    {% endif %}
  </div>
  {% if this_user %}
    <div class="d-flex align-items-center gap-2">
      <a href="{% url 'logout' %}" class="btn btn-outline-danger btn-sm"><i class="bi bi-box-arrow-right me-1"></i>{% trans 'Abmelden' %}</a>
    </div>
  {% endif %}
</div>
